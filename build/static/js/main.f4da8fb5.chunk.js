(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(14),c=t.n(u),o=(t(21),t(2)),l=t(3),i=function(e){var n=e.onChange,t=e.value;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{onChange:n,value:t}))},m=function(e){var n=e.onSubmit,t=e.onChange,a=e.value,u=e.onNumberChange,c=e.numberValue;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:t,value:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:u,value:c}))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},f=t(4),s=t.n(f),d="/api/persons",b=function(){return s.a.get(d).then(function(e){return e.data})},v=function(e){return s.a.post(d,e).then(function(e){return e.data})},g=function(e){return s.a.delete("".concat(d,"/").concat(e))},h=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then(function(e){return e.data})},E=function(e){var n=e.message;return null===n.msg&&null===n.errormsg?null:null!==n.msg?r.a.createElement("div",{className:"message"},n.msg):r.a.createElement("div",{className:"error"},n.errormsg)},p=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),f=Object(l.a)(c,2),s=f[0],d=f[1],p=Object(a.useState)(""),w=Object(l.a)(p,2),j=w[0],O=w[1],y=Object(a.useState)(""),C=Object(l.a)(y,2),S=C[0],k=C[1],N=Object(a.useState)({msg:null,errormsg:null}),D=Object(l.a)(N,2),T=D[0],x=D[1];Object(a.useEffect)(function(){b().then(function(e){return u(e)})},[]);var A=function(e){var n=t.filter(function(n){return n.id===e})[0].name;window.confirm("Do you really want to delete ".concat(n,"?"))&&(g(e).then(function(n){var a=t.filter(function(n){return n.id!==e});u(a)}),x(Object(o.a)({},T,{msg:"".concat(n," was deleted")})),setTimeout(function(){x(Object(o.a)({},T,{msg:null}))},5e3))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{message:T}),r.a.createElement(i,{onChange:function(e){var n=e.target.value;k(n)},value:S}),r.a.createElement("h3",null,"Add a new number"),r.a.createElement(m,{onSubmit:function(e){if(e.preventDefault(),t.find(function(e){return e.name===s})){var n=!0,a=!1,r=void 0;try{for(var c,l=function(){var e=c.value;if(e.name===s)if(window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))){var n=Object(o.a)({},e,{number:j});h(e.id,n).then(function(n){u(t.map(function(t){return t.id!==e.id?t:n}))}).catch(function(n){x(Object(o.a)({},T,{errormsg:"Information of ".concat(s," has already been removed from server")})),u(t.filter(function(n){return n.id!==e.id})),setTimeout(function(){x(Object(o.a)({},T,{errormsg:null}))},5e3)}),x(Object(o.a)({},T,{msg:"".concat(s,"'s number was changed")})),d(""),O(""),setTimeout(function(){x(Object(o.a)({},T,{msg:null}))},5e3)}else d(""),O("")},i=t[Symbol.iterator]();!(n=(c=i.next()).done);n=!0)l()}catch(m){a=!0,r=m}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}else v({name:s,number:j}).then(function(e){u(t.concat(e))}),x(Object(o.a)({},T,{msg:"Added ".concat(s)})),d(""),O(""),setTimeout(function(){x(Object(o.a)({},T,{msg:null}))},5e3)},onChange:function(e){var n=e.target.value;d(n)},value:s,onNumberChange:function(e){var n=e.target.value;O(n)},numberValue:j}),r.a.createElement("h3",null,"Numbers"),function(){var e=S.toLowerCase();return S?t.filter(function(n){return n.name.toLowerCase().includes(e)}).map(function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return A(e.id)}},"Delete"))}):t.map(function(e){return r.a.createElement("p",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return A(e.id)}},"Delete"))})}())};c.a.render(r.a.createElement(p,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.f4da8fb5.chunk.js.map